<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Art Prompt Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .active { background-color: #4f46e5 !important; color: white; border-color: #818cf8; }
        .weighted { border: 2px solid #fbbf24 !important; font-weight: bold; }
        .category-title { display: flex; align-items: center; gap: 8px; border-bottom: 1px solid #374151; padding-bottom: 8px; margin-top: 25px; font-weight: bold; color: #a5b4fc; }
        .prompt-box { background: rgba(0,0,0,0.4); border: 1px solid #4f46e5; }
    </style>
</head>
<body class="bg-gray-950 text-gray-100 p-4 md:p-8 font-sans">

    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-pink-500">AI ART STUDIO</h1>
            <p class="text-gray-500 text-xs mt-2">Dica: Clique normal para selecionar | Clique longo (ou Segurar) para dar PESO (1.3)</p>
        </header>
        
        <div class="sticky top-4 z-50 space-y-4 mb-10">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="prompt-box p-4 rounded-xl shadow-2xl backdrop-blur-lg">
                    <div class="flex justify-between items-center mb-2">
                        <select id="modelSelect" onchange="updatePrompt()" class="bg-gray-800 text-xs p-1 rounded border border-gray-600 outline-none">
                            <option value="xl">Illustration XL / SDXL</option>
                            <option value="pony">Pony Diffusion V6</option>
                            <option value="sd15">Stable Diffusion 1.5</option>
                        </select>
                        <div class="flex gap-2">
                            <button onclick="randomize()" class="text-[10px] bg-purple-600 px-2 py-1 rounded">üé≤ RANDOM</button>
                            <button onclick="clearAll()" class="text-[10px] bg-red-900 px-2 py-1 rounded">LIMPAR</button>
                        </div>
                    </div>
                    <textarea id="output" class="w-full bg-transparent text-sm h-24 outline-none resize-none" placeholder="O prompt aparecer√° aqui..."></textarea>
                    <button onclick="copy('output')" class="w-full mt-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 rounded-lg transition">COPIAR POSITIVO</button>
                </div>

                <div class="prompt-box p-4 rounded-xl shadow-2xl backdrop-blur-lg border-red-900/50">
                    <label class="text-[10px] font-bold text-red-400 uppercase block mb-2">Prompt Negativo (Auto-ajustado)</label>
                    <textarea id="negativeOutput" class="w-full bg-transparent text-sm h-24 outline-none resize-none text-gray-400" readonly></textarea>
                    <button onclick="copy('negativeOutput')" class="w-full mt-2 bg-red-900 hover:bg-red-800 text-white text-xs font-bold py-2 rounded-lg transition">COPIAR NEGATIVO</button>
                </div>
            </div>
        </div>

        <div id="builder" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
    </div>

    <script>
        const categories = {
            "üë§ Tipo F√≠sico": ["muscular hunk", "twink", "bear", "daddy", "athletic", "slim", "hairy chest", "defined abs", "thick thighs"],
            "üî• Posi√ß√µes Sexuais": ["gay couple", "intercourse", "missionary", "doggy style", "cowboy position", "oral sex", "rimming", "anal focus", "holding waist", "man on top"],
            "‚õìÔ∏è Fetiche/Roupas": ["jockstrap", "leather harness", "latex gear", "spandex", "shirtless", "nude", "half-undressed", "crotchless briefs", "bondage gear"],
            "üëî Casual/Uniformes": ["suit and tie", "unbuttoned shirt", "hoodie", "soccer kit", "police uniform", "military gear", "gym tank top", "towel"],
            "üè¢ Ambientes": ["dark alley", "steamy shower", "luxury penthouse", "gym locker", "leather bar", "neon street", "industrial warehouse", "bedroom"],
            "üé® Estilo": ["digital illustration", "cel shaded", "flat color", "thick lines", "anime style", "oil painting", "comic book"]
        };

        let selections = {}; // Armazena { "op√ß√£o": peso }

        function renderButtons() {
            const container = document.getElementById('builder');
            for (const [category, options] of Object.entries(categories)) {
                const div = document.createElement('div');
                div.innerHTML = `<h3 class="category-title">${category}</h3>`;
                const btnContainer = document.createElement('div');
                btnContainer.className = "flex flex-wrap gap-2 mt-3";
                
                options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.innerText = opt;
                    btn.id = `btn-${opt}`;
                    btn.className = "bg-gray-900 border border-gray-800 px-3 py-1.5 rounded-lg text-xs transition-all hover:border-indigo-500";
                    
                    // L√≥gica de clique e clique longo
                    let timer;
                    btn.onmousedown = () => timer = setTimeout(() => toggleOption(opt, true), 500);
                    btn.onmouseup = () => { clearTimeout(timer); if(!selections[opt]) toggleOption(opt, false); };
                    btn.onclick = () => { if(selections[opt]) toggleOption(opt, false); };
                    
                    btnContainer.appendChild(btn);
                });
                div.appendChild(btnContainer);
                container.appendChild(div);
            }
        }

        function toggleOption(opt, isWeighted) {
            const btn = document.getElementById(`btn-${opt}`);
            if (selections[opt]) {
                delete selections[opt];
                btn.classList.remove('active', 'weighted');
            } else {
                selections[opt] = isWeighted ? 1.3 : 1.0;
                btn.classList.add('active');
                if(isWeighted) btn.classList.add('weighted');
            }
            updatePrompt();
        }

        function updatePrompt() {
            const model = document.getElementById('modelSelect').value;
            let tags = Object.entries(selections).map(([tag, weight]) => {
                return weight > 1 ? `(${tag}:${weight})` : tag;
            });

            let pos = "";
            let neg = "";

            if (model === "pony") {
                pos = "score_9, score_8, score_7, rating_explicit, source_anime, " + tags.join(", ");
                neg = "score_4, score_5, score_6, low quality, bad anatomy, text, signature, 3d, realistic";
            } else if (model === "xl") {
                pos = "masterpiece, high quality, " + tags.join(", ") + ", highly detailed illustration";
                neg = "lowres, bad anatomy, hands, text, error, missing fingers, cropped, worst quality, low quality, blurred";
            } else {
                pos = tags.join(", ") + ", highly detailed, 8k wallpaper";
                neg = "disfigured, ugly, bad proportions, distorted, extra limbs";
            }

            document.getElementById('output').value = pos;
            document.getElementById('negativeOutput').value = neg;
        }

        function randomize() {
            clearAll();
            Object.values(categories).forEach(opts => {
                if (Math.random() > 0.3) {
                    const randomOpt = opts[Math.floor(Math.random() * opts.length)];
                    toggleOption(randomOpt, Math.random() > 0.8);
                }
            });
        }

        function clearAll() {
            selections = {};
            document.querySelectorAll('button').forEach(b => b.classList.remove('active', 'weighted'));
            updatePrompt();
        }

        function copy(id) {
            const text = document.getElementById(id);
            text.select();
            document.execCommand("copy");
            const originalBtn = event.target.innerText;
            event.target.innerText = "COPIADO!";
            setTimeout(() => event.target.innerText = originalBtn, 1000);
        }

        renderButtons();
        updatePrompt();
    </script>
</body>
</html>
